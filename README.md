# Are You Just a Guy? üçª

A single-player Reddit-based training game that teaches men bystander intervention and respect standards through realistic, confessional scenarios. Built for the Reddit + Kiro Community Games Challenge.

## üéØ What This Game Is

**"Are You Just a Guy?"** is a single-player educational game that helps men practice being better allies through humor and real-world scenarios. Players read Reddit-style confessional stories about uncomfortable social situations and choose how they'd respond, learning evidence-based intervention techniques along the way.

The game runs inline directly within Reddit posts, providing an immediate, seamless experience without popups or external navigation. Players see their progress tracked on a visual "Trash Meter" with real Reddit avatars, including their own profile picture riding along the progress bar.

### Core Gameplay (v2 Single-Player)
- **Read realistic scenarios** written in Reddit confessional style (r/AITA, r/TwoXChromosomes tone)
- **Choose your response** from 3 shuffled options (A/B/C) based on real intervention frameworks
- **Get exact scores** of 0%, 60%, or 100% (no gradual scoring)
- **Track your progress** on a single "Trash Meter" with your robot avatar (ü§ñ) riding at your overall average
- **Earn/lose XP** with immediate feedback: Golden (+20 XP), Partial (+10 XP), Embarrassing (-5 XP)
- **Build daily streaks** with fire emoji badges for consecutive play
- **No scenario repeats** - each user sees unique scenarios

## üöÄ What Makes This Game Innovative

### 1. **Inline Reddit Integration**
- Runs directly inside Reddit posts with tall height configuration for seamless feed integration
- No popup windows or external navigation - plays like native Reddit content
- Optimized for mobile Reddit users with clean, responsive design
- Immediate gameplay start without splash screens or loading delays

### 2. **Real Reddit Avatar Integration**
- Fetches and displays your actual Reddit profile picture on the progress bar
- Shows leaderboard players' real Reddit avatars positioned at their score percentages
- Your avatar (12√ó12px) prominently animated above the progress bar
- Leaderboard avatars (8√ó8px) positioned at exact score locations with tooltips
- Proper fallback support for avatar loading errors

### 3. **Single-Player Focus with Personal Growth**
- Uses familiar Reddit confessional tone that feels authentic (r/AITA, r/TwoXChromosomes style)
- Focuses on personal skill building rather than social comparison
- Clean, light-themed interface optimized for mobile Reddit users
- No community results or peer pressure - purely personal development

### 4. **Evidence-Based Teaching with Exact Scoring**
- Integrates proven frameworks: 5 D's, DEARMAN, LIVES, COOPER
- Provides practical micro-scripts players can use in real life
- Exact 3-tier scoring system: 0% (Embarrassing), 60% (Partial), 100% (Golden)
- Teaches through humor and relatability, not preaching

### 5. **Gamified Personal Development**
- "Trash Meter" with your real Reddit avatar showing overall progress at 12√ó12px size
- XP system with immediate animated toast notifications (+20, +10, -5 XP per choice)
- Bouncy arrow animation shows your current round score (strictly no text near arrow)
- Daily streak tracking with fire emoji badges (üî• Day N) encourages consistent practice
- Leaderboard showing real Reddit usernames and avatars with score percentages

### 6. **Kiro-Powered Content Pipeline**
- Automated scenario validation prevents low-quality content
- AI-assisted content generation maintains consistent tone
- Quality gates ensure all scenarios meet educational standards
- Scalable content creation for ongoing engagement

## üì± How to Play: Step-by-Step

### Getting Started
1. **Find the game** in a Reddit post (look for "Are You Just a Guy?" with a Play button)
2. **Click "Launch App"** to open the game inline within the Reddit post
3. **Game starts immediately** - No splash screen, direct access to gameplay
4. **Check your streak** - Fire emoji badge (üî• Day N) shows consecutive days played in the header
5. **View the leaderboard** - Current best player and their score percentage appears in the top right
6. **See your Trash Meter** - Always visible progress bar with your real Reddit avatar showing your overall average
7. **Your avatar loads** - The game fetches your actual Reddit profile picture to display on the progress bar

### During Gameplay
1. **Read the scenario** - First-person confessional stories about realistic social situations (120-220 words)
   - Examples: Bar situations, workplace harassment, digital consent, campus parties
   - Written in authentic Reddit confessional tone (like r/AITA posts)
   - Situations include context about social cues, power dynamics, and safety concerns

2. **Consider your options** - Three choices (A, B, C) with shuffled content but consistent labels
   - Each choice represents a different approach to the situation
   - Options range from safer interventions to riskier or passive responses
   - No emojis inside choice buttons - clean text only

3. **Submit your answer** - Click your choice to lock it in
   - Choices become disabled after submission (gray background, gray text)
   - Your selection is highlighted with blue styling

### After Each Round
1. **See your exact score** - Get exactly 0%, 60%, or 100% based on your choice:
   - **Golden choices** (90-100 points): +20 XP, demonstrates best practices with evidence-based frameworks
   - **Partial choices** (55-75 points): +10 XP, better than nothing but not ideal
   - **Embarrassing choices** (0-40 points): -5 XP penalty, problematic or passive responses

2. **Check your tier chip** - Colored badge shows where you land with exact tier colors:
   - üíÄ **Embarrassing** (0-20): "Bro‚Ä¶ that was painful to watch." (bg-red-50 text-red-700)
   - ü§∑üèΩ **Just a Guy** (21-40): "Mhhmmm." (bg-orange-50 text-orange-700)
   - üò§ **Recovering Guy** (41-70): "Keep trying, you got this." (bg-amber-50 text-amber-700)
   - üòé **Decent Human** (71-90): "You're learning and it shows." (bg-blue-50 text-blue-700)
   - ü¶∏üèΩ **Golden Retriever** (91-100): "You're the adult child you needed." (bg-green-50 text-green-700)

3. **Watch the Trash Meter animate** - Single progress bar with smooth spring animations:
   - **Your Reddit avatar** at 12√ó12px (w-12 h-12) with white border and shadow, riding at your overall average position
   - **Leaderboard avatars** at 8√ó8px (w-8 h-8) positioned at their exact score percentages with tooltips
   - **Bouncy arrow** appears at your current round score with 2-bounce animation (strictly no text near arrow)
   - **Spring animation** with exact specs (stiffness: 260, damping: 24, mass: 0.9)
   - **Color gradient** from red ‚Üí amber ‚Üí green (left to right) with tier emoji anchors below

4. **Get XP feedback** - Animated toast notification shows your XP change (+20, +10, or -5)
   - Green background for positive XP, red for penalties
   - Appears in header for 1.2 seconds with smooth fade animation

5. **Try new scenarios** - Click "üé≤ Try Another Scenario" to continue
   - Server prevents scenario repeats per user
   - Each scenario teaches different intervention frameworks

### Building Your Profile
- **Track your average** - Your overall Trash Meter score shows long-term progress (displayed in header)
- **Earn/lose XP** - Immediate feedback with animated toast notifications
- **Maintain streaks** - Play daily to build your intervention skills with fire emoji badges (üî• Day N)
- **Learn frameworks** - Each scenario teaches evidence-based intervention techniques:
  - **5 D's**: Direct, Distract, Delegate, Delay, Document
  - **DEARMAN**: Describe, Express, Assert, Reinforce, Mindful, Appear Confident, Negotiate
  - **LIVES**: Listen, Inquire, Validate, Enhance Safety, Support
  - **COOPER**: White, Yellow, Orange, Red (awareness states)
- **Practice micro-scripts** - Get real phrases you can use in similar situations (default and gentle versions)
- **No scenario repeats** - Server tracks which scenarios you've seen to ensure fresh content

## üèÜ Hackathon Categories

### Community Play (v2 Single-Player Focus)
- **Personal growth tracking** inside Reddit posts
- Individual skill building with "Trash Meter" progress
- Sparks self-reflection and behavior change through humor
- Teaches bystander intervention through personal practice and streaks

### Best Kiro Developer Experience
- **Complete spec-driven development** with `.kiro/specs/game_contract.md` and `.kiro/specs/ui_contract.md`
- **Automated validation** via `.kiro/hooks/validate_scenarios.mjs`
- **Content generation** with `.kiro/steering/generator.prompt.md`
- **Quality gates** that prevent bad scenarios from being committed
- **UI rules enforcement** with `.kiro/steering/ui_rules.prompt.md`

## üöÄ Quick Start

### Prerequisites
- Node.js 18+
- Devvit CLI installed
- Reddit account with developer access

### Installation
```bash
# Clone and install
cd are-you-justaguy
npm install

# Validate scenarios with Kiro
npm run kiro:validate

# Start development server
npm run dev
```

### Development
```bash
# Run the game locally (starts client, server, and Devvit playtest)
npm run dev

# Validate scenario quality
npm run kiro:validate

# Build for production
npm run build

# Deploy to Reddit
npm run deploy
```

### API Endpoints (v2 Single-Player)
The game uses these main endpoints:

- **GET /api/scenario** - Returns a random scenario (no repeats per user)
- **POST /api/submit** - Records player choice, returns exact score and XP change
- **GET /api/me** - Returns user's Reddit username and avatar URL
- **GET /api/best** - Returns leaderboard with usernames, scores, and avatar URLs
- **GET /api/generate-scenario** - Generates new scenario using Kiro AI

**Removed in v2**: `/api/reveal` (no community results in single-player mode)

### Current Scenario Content
The game includes 9 realistic scenarios covering:
- **Bar/Social situations** - Bystander intervention in nightlife settings ("Bar ¬∑ Bystander Ally")
- **Workplace harassment** - Professional boundary setting and ally behavior ("Workplace ¬∑ Inappropriate Comments", "Workplace ¬∑ Sexual Harassment")
- **Digital consent** - Online harassment and image sharing ("Digital ¬∑ Consent", "Digital ¬∑ Dating Boundaries")
- **Campus parties** - College social dynamics and safety ("Campus ¬∑ Party Boundaries")
- **Gym environments** - Addressing unwanted attention and staring ("Gym ¬∑ Unwanted Attention")
- **Friend group dynamics** - Calling out problematic behavior among peers ("Friends ¬∑ Consent Assumption")

## üß† How It Works

### Game Flow (v2 Single-Player)
1. **Immediate Start**: Game loads directly inline within Reddit post with no splash screen
2. **Header Display**: Shows game title, streak badge (üî• Day N), leaderboard (üèÜ Best player), and animated XP toasts
3. **Avatar Loading**: Fetches your real Reddit profile picture and leaderboard players' avatars via `/api/me` and `/api/best`
4. **Trash Meter**: Always visible progress bar with your real Reddit avatar at overall average position
5. **Scenario Load**: Player reads a confessional Reddit-style story (120-220 words) - no repeats per user
6. **Choice Phase**: Player picks A/B/C response (content shuffled, labels stay in order, no emojis in buttons)
7. **Vote Recording**: Server tracks choice via `/api/submit`, prevents duplicate votes, returns exact score and XP
8. **Immediate Feedback**: Shows exact score, tier chip with proper contrast colors, and animated XP toast in header
9. **Trash Meter Animation**: Bouncy arrow appears at round score with 2-bounce animation (no text), avatar moves to new average
10. **Progress Tracking**: Updates overall average score and daily streak counter with fire emoji badges

### Trash Meter System (v2 Single-Player)
The game uses a single visual progress bar with a robot avatar (ü§ñ) that rides along based on your overall average:

| Score Range | Tier | Emoji | Message | Chip Colors |
|-------------|------|-------|---------|-------------|
| 0-20 | Embarrassing | üíÄ | "Bro‚Ä¶ that was painful to watch." | bg-red-50 text-red-700 |
| 21-40 | Just a Guy | ü§∑üèΩ | "Mhhmmm." | bg-orange-50 text-orange-700 |
| 41-70 | Recovering Guy | üò§ | "Keep trying, you got this." | bg-amber-50 text-amber-700 |
| 71-90 | Decent Human | üòé | "You're learning and it shows." | bg-blue-50 text-blue-700 |
| 91-100 | Golden Retriever | ü¶∏üèΩ | "You're the adult child you needed." | bg-green-50 text-green-700 |

### Exact Scoring System (v2)
- **Golden choices** (100%): Demonstrate best practices with evidence-based frameworks, earn +20 XP
- **Partial choices** (60%): Better than nothing but not ideal, earn +10 XP  
- **Embarrassing choices** (0%): Problematic or passive responses, lose -5 XP

### Visual Features
- **Inline Reddit integration** with tall height configuration for seamless feed experience
- **Single trash meter** always visible with spring animation (stiffness: 260, damping: 24, mass: 0.9)
- **Real Reddit avatars** - Your avatar at 12√ó12px (w-12 h-12) positioned above the progress bar
- **Leaderboard avatars** at 8√ó8px (w-8 h-8) positioned at exact score percentages with tooltips
- **Bouncy arrow** shows current round score position with 2-bounce animation (strictly no text near arrow)
- **Tier emoji anchors** below the progress bar: üíÄüôàüò¨üòéü¶∏‚Äç‚ôÇÔ∏è
- **Choice shuffling** with A, B, C labels staying in exact order, content randomized
- **Light theme** throughout: bg-gray-50 page, bg-white cards with rounded-2xl corners
- **Tier chips** with exact contrast colors (red-50/red-700, orange-50/orange-700, etc.)
- **Animated XP toasts** in header with green/red backgrounds and smooth fade transitions
- **Streak badges** with fire emoji (üî• Day N) showing consecutive days played
- **Leaderboard display** showing real Reddit usernames and score percentages

### Learning Standards
- **5 D's**: Direct, Distract, Delegate, Delay, Document
- **DEARMAN**: Describe, Express, Assert, Reinforce, Mindful, Appear Confident, Negotiate  
- **LIVES**: Listen, Inquire, Validate, Enhance Safety, Support
- **COOPER**: White, Yellow, Orange, Red (awareness states)

## üõ†Ô∏è Kiro Integration (For $10k Prize)

### Specs (`.kiro/specs/`)
- **game_contract.md**: Defines complete v2 game specification and requirements
- **ui_contract.md**: Non-negotiable UI rules for single-player experience
- **scenario_schema.md**: Defines required fields, tone, and quality standards
- Ensures every scenario has proper framework mapping and micro-scripts

### Hooks (`.kiro/hooks/`)
- **validate_scenarios.mjs**: Blocks commits with missing fields or bad tone
- Validates frameworks, outcomes, points ranges, and banned phrases
- Run with: `npm run kiro:validate`

### Steering (`.kiro/steering/`)
- **generator.prompt.md**: Template for generating new scenarios
- Helps create consistent, Reddit-style confessional content
- Maintains tone and standards across all scenarios

### Kiro Workflow
1. **Generate**: Use steering prompt to draft new scenarios
2. **Validate**: Run `npm run kiro:validate` to check quality
3. **Iterate**: Fix any validation errors
4. **Commit**: Only commit when validation passes ‚úÖ

## üìÅ Project Structure

```
src/
‚îú‚îÄ‚îÄ client/
‚îÇ   ‚îú‚îÄ‚îÄ App.tsx                    # Main game UI (React)
‚îÇ   ‚îú‚îÄ‚îÄ main.tsx                   # React app entry point
‚îÇ   ‚îú‚îÄ‚îÄ index.html                 # HTML template
‚îÇ   ‚îú‚îÄ‚îÄ index.css                  # Global styles
‚îÇ   ‚îî‚îÄ‚îÄ components/
‚îÇ       ‚îú‚îÄ‚îÄ TrashProgress.tsx      # Trash Meter visualization with robot avatar
‚îÇ       ‚îú‚îÄ‚îÄ Header.tsx             # Header with leaderboard, streak, and XP toasts
‚îÇ       ‚îî‚îÄ‚îÄ Splash.tsx             # Animated splash screen with beer emoji
‚îú‚îÄ‚îÄ server/
‚îÇ   ‚îú‚îÄ‚îÄ index.ts                   # API endpoints and game logic
‚îÇ   ‚îî‚îÄ‚îÄ core/
‚îÇ       ‚îî‚îÄ‚îÄ post.ts                # Reddit post creation
‚îî‚îÄ‚îÄ shared/
    ‚îú‚îÄ‚îÄ types.ts                   # TypeScript interfaces
    ‚îú‚îÄ‚îÄ scenarios.ts               # Static scenario content
    ‚îî‚îÄ‚îÄ types/
        ‚îî‚îÄ‚îÄ api.ts                 # API response types

.kiro/
‚îú‚îÄ‚îÄ specs/
‚îÇ   ‚îú‚îÄ‚îÄ scenario_schema.md         # Content requirements and validation rules
‚îÇ   ‚îî‚îÄ‚îÄ ui_contract.md             # Complete UI specification and rules
‚îú‚îÄ‚îÄ hooks/
‚îÇ   ‚îî‚îÄ‚îÄ validate_scenarios.mjs     # Quality validation hook
‚îî‚îÄ‚îÄ steering/
    ‚îú‚îÄ‚îÄ generator.prompt.md        # Content generation template
    ‚îú‚îÄ‚îÄ ui_rules.prompt.md         # UI development rules
    ‚îî‚îÄ‚îÄ [other steering files]     # Additional development guidance
```

## üéÆ Adding New Scenarios

### Method 1: Manual Creation
1. Copy an existing scenario in `src/shared/scenarios.ts`
2. Edit the content following the schema
3. Run `npm run kiro:validate` to check quality
4. Fix any validation errors
5. Commit when validation passes

### Method 2: Kiro Generation
1. Use the steering prompt in `.kiro/steering/generator.prompt.md`
2. Provide framework, step, setting, and context
3. Generate scenario JSON
4. Validate with `npm run kiro:validate`
5. Add to scenarios.ts

## üèÖ Competition Strategy

### For Community Play Prize (v2 Single-Player)
- **Personal development focus**: Emphasize individual skill building and progress tracking
- **Habit formation**: Show how daily streaks and XP system encourage consistent practice
- **Reddit-native**: Use confessional tone that feels like r/AITA or r/TwoXChromosomes
- **Mobile-optimized**: Clean, light interface perfect for Reddit mobile users

### For Kiro Prize
- **Complete spec enforcement**: Show how `.kiro/specs/` files define exact game behavior
- **UI contract compliance**: Demonstrate strict adherence to `.kiro/specs/ui_contract.md`
- **Quality automation**: Prove how Kiro prevents bad content from reaching users
- **Scalable content**: Show how steering helps generate many scenarios quickly
- **Video submission**: Record 3-minute demo of Kiro improving your DX

## üöÄ Deployment

### To Reddit
```bash
# Build and deploy
npm run build
npm run deploy

# Publish to Reddit
npm run launch
```

### Demo Post
1. Create a post in your test subreddit
2. Use the Devvit app to embed the game
3. Share the post link for judging
4. Make sure it's self-explanatory for new users

## üéØ Success Metrics

- **Engagement**: High replay rate and streak maintenance
- **Learning**: Players improve Trash Meter scores over time
- **Community**: Shared screenshots and discussions
- **Standards**: Consistent application of behavioral frameworks

## üìù Submission Checklist

- [ ] App published on developer.reddit.com
- [ ] Demo post with working game
- [ ] Public repo with OSI license
- [ ] `.kiro` directory committed (for Kiro prize)
- [ ] 3-minute video showing Kiro DX (for Kiro prize)
- [ ] README explaining the project
- [ ] All scenarios pass `npm run kiro:validate`

## ü§ù Contributing

1. Fork the repo
2. Add new scenarios following the schema
3. Run `npm run kiro:validate`
4. Submit PR with validation passing

## üìÑ License

MIT License - see LICENSE file for details.

---

**Built with ‚ù§Ô∏è for the Reddit + Kiro Community Games Challenge**

*Teaching men to be better allies, one scenario at a time.*
